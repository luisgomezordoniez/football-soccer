[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "The Beautiful Game",
    "section": "",
    "text": "1 Introduction\nWe are interested in analyzing football soccer match results and statistics from several major leagues around the world. Soccer is one of the most popular sports globally, and its relevance is growing as the next World Cup approaches. We aim to explore how common match statistics such as goals, shots on target, and fouls, affect not only the outcome of individual games but also overall team performance throughout a season. We also plan to study how team rankings evolve over time, whether different strategic patterns can be identified, and how accurate betting odds are in predicting results. Through this project, we hope to discover additional insights about the game and share interesting findings.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "2  Data",
    "section": "",
    "text": "2.1 Description\nThis project uses publicly available match-level data provided by Football-Data.co.uk, a long-standing repository of standardized football results and match statistics. The platform compiles official match information from multiple reputable sources—including XScores, BBC Sport, Flashscore, and ESPN—and distributes them in a consistent, computer-ready CSV format suitable for statistical analysis.\nFor the purposes of this study, only data from English football competitions were used. These include the Premier League, Championship, League One, League Two, and, when available, the National League. The dataset covers more than two decades of competitive play, with full-time and half-time results available back to the 1993/94 season and detailed match statistics widely available from the 2000/01 season onward.\nThe variables utilized in this project relate exclusively to match outcomes and in-game performance metrics. These include goals scored, half-time results, shots, shots on target, corners, fouls, offsides, disciplinary actions, and referee information. Historical bookmaker odds—also included in the original files—were intentionally excluded, as the analysis focuses on sporting performance rather than betting markets.\nFootball-Data.co.uk aggregates information from multiple official and media-based match reporting services to ensure accuracy and completeness. Data are updated on a rolling basis throughout each season and are archived annually, enabling consistent longitudinal analysis across leagues and time periods.\nThis dataset provides a comprehensive, standardized foundation for evaluating long-term trends in English football, comparing performance across divisions, and studying changes in the nature of the game over time.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#data-collection",
    "href": "data.html#data-collection",
    "title": "2  Data",
    "section": "2.2 Data Collection",
    "text": "2.2 Data Collection\nWe automated the collection and cleaning of match-level data from the Football-Data.co.uk archive. Using tools from the purrr package, it downloads each available season across the four major English divisions, standardizes column naming conventions across years, removes unused or unavailable variables, and consolidates all leagues into a single harmonized dataset. This approach ensures reproducibility, minimizes manual intervention, and guarantees consistency across more than two decades of historical football data.\n\n\nCode\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(readr)\nlibrary(dplyr)\nlibrary(forcats)\nlibrary(ggplot2)\nlibrary(redav)\n\nnot_all_na &lt;- function(x) any(!is.na(x))\nyear_end = 2025\n\nseason_map &lt;- function(start = 1993, end = year_end) {\n  season_year_s &lt;- start:(end - 1)\n  season_year_e &lt;- (start + 1):end\n  \n  tibble(\n    id_season = sprintf(\"%02d%02d\", season_year_s %% 100, season_year_e %% 100),\n    season_name = paste0(season_year_s, \"/\", season_year_e)\n  )\n}\n\nquery &lt;- function(league, start = 1993, end = year_end) {\n  \n  temporadas &lt;- season_map(start, end)\n  \n  keep_cols &lt;- c(\n    \"Div\", \"Date\", \"Time\", \"HomeTeam\", \"AwayTeam\", \"Home\", \"Away\",\n    \"FTHG\", \"FTAG\", \"FTR\", \"HTHG\", \"HTAG\", \"HTR\", \"Referee\",\n    \"HS\", \"AS\", \"HST\", \"AST\", \"HF\", \"AF\", \"HC\", \"AC\",\n    \"HY\", \"AY\", \"HR\", \"AR\"\n  )\n  \n  dfs &lt;- map2(\n    temporadas$id_season,\n    temporadas$season_name,\n    function(id, season) {\n      \n      url &lt;- paste0(\"https://www.football-data.co.uk/mmz4281/\", id, \"/\", league, \".csv\")\n      \n      tryCatch({\n        \n        df &lt;- read_csv(url, show_col_types = FALSE)\n        \n        df &lt;- df %&gt;% \n          select(any_of(keep_cols)) %&gt;% \n          select_if(not_all_na)\n        \n        # fix old Home/Away formats\n        if (\"Home\" %in% names(df)) {\n          df &lt;- df %&gt;% rename(HomeTeam = Home, AwayTeam = Away)\n        }\n        \n        df &lt;- df %&gt;%\n          mutate(Season = season) %&gt;%\n          mutate(across(everything(), as.character))\n        \n        message(\"Loaded season: \", season)\n        df\n        \n      }, error = function(e) {\n        message(\"No data for: \", season)\n        return(NULL)\n      })\n    }\n  )\n  \n  # bind all non-null elements\n  final &lt;- bind_rows(dfs)\n  final=final |&gt; filter(is.na(Div)==F)\n  message(\"Seasons loaded: \", length(unique(final$Season)))\n  message(\"Divisions found: \", paste(unique(final$Div), collapse = \", \"))\n  \n  final\n}\n\n#We save a local copy to avoid unnecesary consults to the repository\n#E0 &lt;- query(\"E0\")   # Premier League | Tier 1\n#E1 &lt;- query(\"E1\")   # Championship | Tier 2\n#E2 &lt;- query(\"E2\")   # League One | Tier 3\n#E3 &lt;- query(\"E3\")   # League Two | Tier 4\n\n#Data_England=bind_rows(E0,E1,E2,E3)\n\nData_England &lt;- read_csv(\"https://github.com/luisgomezordoniez/football-soccer/raw/refs/heads/main/data/Data_England.csv\")\n\nData_England =Data_England |&gt;\n  mutate(\n    League=case_when(\n    Div==\"E0\" ~\"Premier League\",\n    Div==\"E1\" ~\"Championship\",\n    Div==\"E2\" ~\"League One\",\n    Div==\"E3\" ~\"League Two\"))\n\n\n\nData_England$League &lt;- factor(Data_England$League, levels =c(\"Premier League\", \"Championship\",\"League One\", \"League Two\"), ordered = TRUE)\n\nMy_Data_England=Data_England |&gt;\n  group_by(Div, Season) |&gt;\n  summarise(count=n())",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#mising-values",
    "href": "data.html#mising-values",
    "title": "2  Data",
    "section": "2.3 Mising Values",
    "text": "2.3 Mising Values\nWe can identify three distinct tiers of data completeness across the four tiers of English football. The pre-2000 era is limited to basic match outcomes and full-time goals. From 2000 onwards, the dataset expands to include granular match statistics, such as shots, corners, fouls, and disciplinary records. Finally, post-2020, data fidelity improves further to include match start times.\n\n\nCode\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(tidyr)\nlibrary(ggalluvial)\nlibrary(lubridate)\nlibrary(GGally)\nlibrary(scales)   # para rescale()\nlibrary(vcd)\n\nmissing_summary &lt;- Data_England %&gt;%\n  group_by(League, Season) %&gt;%\n  summarise(across(everything(), ~100* mean(is.na(.))), .groups = \"drop\") %&gt;%  # proportion missing\n  pivot_longer(\n    cols = -c(League, Season),\n    names_to = \"variable\",\n    values_to = \"prop_missing\"\n  ) %&gt;%\n  group_by(variable) %&gt;%\n  mutate(total_missing = mean(prop_missing, na.rm = TRUE)) %&gt;%\n  ungroup() %&gt;%\n  mutate(variable = fct_reorder(variable, total_missing, .desc = TRUE))\n\nmissing_summary=missing_summary |&gt;\n  mutate(Season=substr(Season, 6,10))\n\nggplot(missing_summary, aes(x = variable, y = Season, fill = prop_missing)) +\n  geom_tile(color = \"white\") +\n  facet_wrap(~ League, scales = \"free_y\") +\n  scale_fill_gradient(\n    low = \"white\",\n    high = \"#191970\",\n    name = \"Missing (%)\"\n  ) +\n  labs(\n    title = \"Proportion of Missing Values Across Seasons and Columns by League\",\n    x = \"Variable\",\n    y = \"Season\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(\n    axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.5),\n    panel.spacing = unit(1, \"lines\")\n  )\n\n\n\n\n\n\n\n\n\n\n2.3.1 Outliers\nThe heatmap compares how often different outlier-detection methods flag extreme values in each match variable. Across most variables, all three methods identify very few outliers, indicating generally well‑behaved distributions. In contrast, red‑card variables (HR, AR) and, to a lesser extent, full‑time home goals (FTHG) show much higher outlier percentages, especially under the IQR method, revealing heavy tails or rare extreme events, which is reasonable since its not common to have a game with a lot of goals or red cards.\n\n\nCode\noutlier_analysis &lt;- function(df, cols) {\n  results &lt;- list()\n  \n  for (col in cols) {\n    if (!col %in% names(df)) {\n      message(paste(\"Column\", col, \"not found. Skipping.\"))\n      next\n    }\n    \n    x &lt;- df[[col]]\n    x &lt;- x[!is.na(x)]  # remove NAs\n    \n    # Summary stats\n    stats &lt;- summary(x)\n    \n    # ---- Z-score method ----\n    zscores &lt;- (x - mean(x)) / sd(x)\n    z_outliers &lt;- x[abs(zscores) &gt; 3]\n    \n    # ---- IQR method ----\n    Q1 &lt;- quantile(x, 0.25)\n    Q3 &lt;- quantile(x, 0.75)\n    IQR_val &lt;- Q3 - Q1\n    lower_iqr &lt;- Q1 - 1.5 * IQR_val\n    upper_iqr &lt;- Q3 + 1.5 * IQR_val\n    iqr_outliers &lt;- x[x &lt; lower_iqr | x &gt; upper_iqr]\n    \n    # ---- Percentile method ----\n    p1  &lt;- quantile(x, 0.01)\n    p99 &lt;- quantile(x, 0.99)\n    pct_outliers &lt;- x[x &lt; p1 | x &gt; p99]\n    \n    results[[col]] &lt;- list(\n      summary_stats = stats,\n      zscore_outliers = z_outliers,\n      z_outlier_pct = length(z_outliers) / length(x) * 100,\n      iqr_outliers = iqr_outliers,\n      iqr_outlier_pct = length(iqr_outliers) / length(x) * 100,\n      percentile_outliers = pct_outliers,\n      pct_outlier_pct = length(pct_outliers) / length(x) * 100\n    )\n  }\n  \n  return(results)\n}\n\ncolumns_to_check &lt;- c(\n  \"FTHG\",\"FTAG\",      # goals\n  \"HTHG\",\"HTAG\",      # goals\n  \"HS\",\"AS\",          # shots\n  \"HST\",\"AST\",        # shots on target\n  \"HF\",\"AF\",          # fouls\n  \"HC\",\"AC\",          # corners\n  \"HY\",\"AY\",          # yellow cards\n  \"HR\",\"AR\"           # red cards\n)\n\noutliers &lt;- outlier_analysis(Data_England, columns_to_check)\n\n\n\nplot_outlier_heatmap &lt;- function(outlier_list) {\n  tibble(\n    variable = names(outlier_list),\n    zscore_pct   = sapply(outlier_list, function(x) x$z_outlier_pct),\n    iqr_pct      = sapply(outlier_list, function(x) x$iqr_outlier_pct),\n    percentile_pct = sapply(outlier_list, function(x) x$pct_outlier_pct)\n  ) %&gt;%\n    pivot_longer(cols = -variable, names_to = \"method\", values_to = \"pct\") %&gt;%\n    ggplot(aes(x = method, y = variable, fill = pct)) +\n    geom_tile() +\n    scale_fill_gradient(low = \"white\", high = \"red\") +\n    theme_minimal(base_size = 13) +\n    labs(\n      title = \"Outlier Percentage by Method\",\n      x = \"Method\",\n      y = \"Variable\",\n      fill = \"% Outliers\"\n    )\n}\n\nplot_outlier_heatmap(outliers)\n\n\n\n\n\n\n\n\n\nFor example, the outliers in home‑team goals per match (FTHG) and in red cards for both home (HR) and away teams (AR) are concentrated near the upper quantiles of their respective distributions.\n\n\nCode\nplot_density_outliers &lt;- function(df, col) {\n  x &lt;- df[[col]]\n  x &lt;- x[!is.na(x)]\n  \n  p1  &lt;- quantile(x, 0.05)\n  p99 &lt;- quantile(x, 0.95)\n  \n  tibble(value = x) %&gt;%\n    ggplot(aes(value)) +\n    geom_bar(fill = \"steelblue\", alpha = 0.75) +\n    geom_vline(xintercept = p1,  color = \"red\", linetype = \"dashed\") +\n    geom_vline(xintercept = p99, color = \"red\", linetype = \"dashed\") +\n    scale_x_continuous(breaks = seq(0, 9, by = 1))+\n    theme_minimal(base_size = 13) +\n    labs(\n      title = paste(\"Distribution of:\", col),\n      subtitle = \"Red dashed lines = 5th & 95th percentiles\",\n      x = col,\n      y = \"Number of games\"\n    )\n}\n\nplot_density_outliers(Data_England, \"HR\")\n\n\n\n\n\n\n\n\n\nCode\nplot_density_outliers(Data_England, \"AR\")\n\n\n\n\n\n\n\n\n\nCode\nplot_density_outliers(Data_England, \"FTHG\")",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#expand-to-learn-about-column-names",
    "href": "data.html#expand-to-learn-about-column-names",
    "title": "2  Data",
    "section": "2.4 Expand To Learn About Column Names",
    "text": "2.4 Expand To Learn About Column Names\nThe column names of our data set are not very informative. We decided to include them here in case the reader find them hard to understand.\n\nDiv = League Division\nDate = Match Date (dd/mm/yy)\nTime = Time of match kick off\nHomeTeam = Home Team\nAwayTeam = Away Team\nFTHG and HG = Full Time Home Team Goals\nFTAG and AG = Full Time Away Team Goals\nFTR and Res = Full Time Result (H=Home Win, D=Draw, A=Away Win)\nHTHG = Half Time Home Team Goals\nHTAG = Half Time Away Team Goals\nHTR = Half Time Result (H=Home Win, D=Draw, A=Away Win)\n\nMatch Statistics (where available)\n\nReferee = Match Referee\nHS = Home Team Shots\nAS = Away Team Shots\nHST = Home Team Shots on Target\nAST = Away Team Shots on Target\nHHW = Home Team Hit Woodwork\nAHW = Away Team Hit Woodwork\nHC = Home Team Corners\nAC = Away Team Corners\nHF = Home Team Fouls Committed\nAF = Away Team Fouls Committed\nHY = Home Team Yellow Cards\nAY = Away Team Yellow Cards\nHR = Home Team Red Cards\nAR = Away Team Red Cards",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "3  Enlglish football through the years",
    "section": "",
    "text": "4 Location of Teams\nWe want to see how soccer has changed through the years in terms of attack and defense. Our hypothesis is that the english football has become more competitive. For proving this hypothesis we will analyze the differences among the teams that conform the Premier League, the dominance and the results of the matches.\nFirst of all, we know that goals can be a strong indicator to understand this, so we plan to base our first analysis on the average number of goals scored by teams.\nWhile the average number of goals by home teams has remained relatively stable since 1993, away teams show a clear upward trend in goals, reflecting more offensive strategies, especially since 2015. This suggests a reduction in the traditional home-field advantage.\ni. Away goals\nBetween 1993 and 2010, away teams scored about 1.10-1.15 goals per match, but since 2011 this number has increased to around 1.20-1.25. Starting in 2018, we can observe a sustained raise in away goals, reaching historic highs in 2023 and 2024, when they exceeded 1.45 goals per match.\nii. Home goals\nHome teams have consistently scored between 1.45 and 1.65 goals per match throughout the entire period, with small drops in 2008 and 2015. Recently, in 2023, there was an increase, but not one strong enough to confirm an upward trend.\nConclusion\nHome-field advantage has decreased significantly over the years. The recent offensive surge in the Premier League comes mainly from away teams.\nOver the past three decades, Premier League results show a decrease in draws, an increase in away-team victories, and relatively stable home-team victories. This suggests that the league has become more competitive and that the traditional home-field advantage has gradually diminished.\nWe have 116 teams across all the tiers, we can see that London and\nCode\n{\n  stadiums &lt;- data.frame(\n  team = c(\n    \"Arsenal\",\"Aston Villa\",\"Bournemouth\",\"Brentford\",\"Brighton\",\"Burnley\",\n    \"Chelsea\",\"Crystal Palace\",\"Everton\",\"Fulham\",\"Leeds\",\"Leicester\",\n    \"Liverpool\",\"Luton\",\"Man City\",\"Man United\",\"Newcastle\",\"Nott'm Forest\",\n    \"Sheffield United\",\"Southampton\",\"Sunderland\",\"Tottenham\",\"West Ham\",\n    \"Wolves\",\"Cardiff\",\"Swansea\",\"Stoke\",\"Norwich\",\"West Brom\",\"Huddersfield\",\n    \"QPR\",\"Reading\",\"Wigan\",\"Blackburn\",\"Bolton\",\"Birmingham\",\"Portsmouth\",\n    \"Blackpool\",\"Derby\",\"Grimsby\",\"Stockport\",\"Tranmere\",\"Port Vale\",\"Bury\",\n    \"Rushden & D\",\"Hartlepool\",\"Dag and Red\",\"Hereford\",\"Torquay\",\"Boston\",\n    \"Kidderminster\",\"Scarborough\",\"Ipswich\",\"Middlesbrough\",\"Watford\",\"Hull\",\n    \"Coventry\",\"Charlton\",\"Sheffield Weds\",\"Wimbledon\",\"Barnsley\",\"Oldham\",\n    \"Swindon\",\"Oxford\",\"Wrexham\",\"Bristol City\",\"Millwall\",\"Preston\",\n    \"Plymouth\",\"Rotherham\",\"Peterboro\",\"Wycombe\",\"Burton\",\"Milton Keynes Dons\",\n    \"Doncaster\",\"Bristol Rvs\",\"Shrewsbury\",\"Cambridge\",\"Carlisle\",\"Cheltenham\",\n    \"Fleetwood Town\",\"Accrington\",\"Morecambe\",\"Forest Green\",\"Chesterfield\",\n    \"Leyton Orient\",\"Newport County\",\"Barrow\",\"Sutton\",\"Yeovil\",\"Scunthorpe\",\n    \"Colchester\",\"Southend\",\"Gillingham\",\"Walsall\",\"Notts County\",\"Lincoln\",\n    \"Exeter\",\"Northampton\",\"Macclesfield\",\"York\",\"Barnet\",\"Salford\",\n    \"Harrogate\",\"Darlington\",\"Halifax\"\n  ),\n  stadium = c(\n    \"Emirates Stadium\",\"Villa Park\",\"Vitality Stadium\",\"Gtech Community Stadium\",\n    \"Falmer Stadium (AMEX)\",\"Turf Moor\",\"Stamford Bridge\",\"Selhurst Park\",\n    \"Goodison Park\",\"Craven Cottage\",\"Elland Road\",\n    \"King Power Stadium\",\"Anfield\",\"Kenilworth Road\",\"Etihad Stadium\",\n    \"Old Trafford\",\"St James' Park\",\"The City Ground\",\"Bramall Lane\",\n    \"St Mary's Stadium\",\"Stadium of Light\",\"Tottenham Hotspur Stadium\",\n    \"London Stadium\",\"Molineux Stadium\",\"Cardiff City Stadium\",\n    \"Swansea.com Stadium\",\"Bet365 Stadium\",\"Carrow Road\",\"The Hawthorns\",\n    \"John Smith's Stadium\",\"Loftus Road\",\"Select Car Leasing Stadium\",\n    \"DW Stadium\",\"Ewood Park\",\"Toughsheet Community Stadium\",\"St Andrew's\",\n    \"Fratton Park\",\"Bloomfield Road\",\"Pride Park Stadium\",\"Blundell Park\",\n    \"Edgeley Park\",\"Prenton Park\",\"Vale Park\",\"Gigg Lane\",\n    \"Hayden Road\",\"Victoria Park\",\"Victoria Road\",\"Edgar Street\",\n    \"Plainmoor\",\"York Street\",\"Aggborough\",\"McCain Stadium\",\n    \"Portman Road\",\"Riverside Stadium\",\"Vicarage Road\",\"MKM Stadium\",\n    \"Coventry Building Society Arena\",\"The Valley\",\"Hillsborough\",\n    \"Plough Lane\",\"Oakwell\",\"Boundary Park\",\"County Ground\",\n    \"Kassam Stadium\",\"Racecourse Ground\",\"Ashton Gate\",\"The Den\",\"Deepdale\",\n    \"Home Park\",\"New York Stadium\",\"London Road Stadium\",\n    \"Adams Park\",\"Pirelli Stadium\",\"Stadium MK\",\"Keepmoat Stadium\",\n    \"Memorial Stadium\",\"Montgomery Waters Meadow\",\"Abbey Stadium\",\n    \"Brunton Park\",\"Whaddon Road\",\"Highbury Stadium\",\"Crown Ground\",\n    \"Mazuma Mobile Stadium\",\"The New Lawn\",\"Technique Stadium\",\"Brisbane Road\",\n    \"Rodney Parade\",\"Holker Street\",\"Gander Green Lane\",\"Huish Park\",\n    \"Glanford Park\",\"JobServe Community Stadium\",\"Roots Hall\",\n    \"Priestfield Stadium\",\"Bescot Stadium\",\"Meadow Lane\",\"Sincil Bank\",\n    \"St James Park\",\"Sixfields Stadium\",\"Moss Rose\",\"Bootham Crescent\",\n    \"The Hive Stadium\",\"Peninsula Stadium\",\"Wetherby Road\",\"Blackwell Meadows\",\n    \"The Shay\"\n  ),\n  lat = c(\n    51.5548,52.5091,50.7352,51.4909,50.8617,53.7891,\n    51.4817,51.3983,53.4387,51.4749,53.7788,52.6201,\n    53.4308,51.8841,53.4830,53.4631,54.9756,52.9392,\n    53.3703,50.9080,54.9144,51.6033,51.5387,52.5901,\n    51.4705,51.6429,52.9881,52.6226,52.5090,53.6499,\n    51.5093,51.4223,53.5463,53.7287,53.5807,52.4759,\n    50.7930,53.8055,52.9225,53.5683,53.4087,53.3779,\n    53.0335,53.5939,52.3338,54.6853,51.5593,52.0649,\n    50.4746,52.9691,52.3800,54.2770,52.0553,54.5828,\n    51.6501,53.7469,52.4497,51.4862,53.4283,51.4287,\n    53.5522,53.5517,51.5647,51.7166,53.0519,51.4402,\n    51.4851,53.7719,50.3804,53.4289,52.5646,51.6210,\n    52.8124,52.0084,53.5186,51.4854,52.6938,52.2039,\n    54.8931,51.9056,53.9248,53.7431,54.0723,51.6427,\n    53.2423,51.5583,51.5873,54.1202,51.3653,50.9328,\n    53.5850,51.9213,51.5458,51.3857,52.5694,52.9467,\n    53.2185,50.7291,52.2359,53.2505,53.9712,51.6190,\n    53.5042,54.0084,54.5194,53.7171\n  ),\n  lon = c(\n    -0.1064, -1.8848, -1.8383, -0.2877, -0.0837, -2.2302,\n    -0.1910, -0.0854, -2.9663, -0.2215, -1.5707, -1.1499,\n    -2.9609, -0.4465, -2.2003, -2.2913, -1.6215, -1.1309,\n    -1.4704, -1.3995, -1.3884, -0.0660, -0.1650, -2.1308,\n    -3.2031, -3.9345, -2.1764, 1.3080, -1.9546, -1.7681,\n    -0.2312, -0.9715, -2.6534, -2.4883, -2.4654, -1.8767,\n    -1.0560, -3.0475, -1.4475, -0.0381, -2.1643, -3.0768,\n    -2.1793, -2.3023, -0.6128, -1.2185, 0.1559, -2.7161,\n    -3.5432, -0.0345, -2.2384, -0.4120, 1.1565, -1.2185,\n    -0.4016, -0.3958, -1.4984, 0.0366, -1.5005, -0.1983,\n    -1.4674, -2.1386, -1.7766, -1.2223, -3.0039, -2.6416,\n    -0.0505, -2.6896, -4.1755, -1.3533, -0.2319, -0.8122,\n    -1.6251, -0.7554, -1.0851, -2.5855, -2.7483, -1.4720,\n    -2.9157, -2.0722, -3.0335, -2.3364, -2.8530, -2.2858,\n    -1.4284, -0.0153, -2.9818, -3.2201, -0.1989, -2.6644,\n    -0.6974, 0.8879, 0.7061, 0.5518, -1.9961, -1.1444,\n    -0.5487, -3.5222, -0.9200, -2.1158, -1.0543, -0.2796,\n    -2.2906, -1.5173, -1.5593, -1.8624\n  )\n)\n}\n\n\nuk_states &lt;- ne_states(country = \"united kingdom\", returnclass = \"sf\")\n\n# Filter for England and Wales and group by regions\nengland_wales_regions &lt;- uk_states %&gt;%\n  filter(geonunit %in% c(\"England\", \"Wales\")) %&gt;%\n  group_by(region) %&gt;%\n  summarise(geometry = st_union(geometry))\n\n\n\n\n# Check the regions\nunique(england_wales_regions$region)\n\n\n [1] \"East\"                       \"East Midlands\"             \n [3] \"East Wales\"                 \"Greater London\"            \n [5] \"North East\"                 \"North West\"                \n [7] \"South East\"                 \"South West\"                \n [9] \"West Midlands\"              \"West Wales and the Valleys\"\n[11] \"Yorkshire and the Humber\"  \n\n\nCode\nengland_wales_regions &lt;- uk_states %&gt;%\n  filter(geonunit %in% c(\"England\", \"Wales\")) %&gt;%\n  group_by(region) %&gt;%\n  summarise(geometry = st_union(geometry))\n\npos &lt;- position_jitter(width = 0.3, seed = 2)\n\npremier_league_teams &lt;- unique(filter(Data_England, Div==\"E0\" & Season==\"2024/2025\")$HomeTeam)\n\nggplot() +\n  geom_sf(data = england_wales_regions,aes(fill=region), \n          color = \"white\", linewidth = 0.3) +\n  geom_point(data = stadiums, aes(x = lon, y = lat), color = \"black\", size = 2.5, alpha = .5) +\n  geom_label_repel(data = stadiums %&gt;% filter(team %in% premier_league_teams),\n                   aes(x = lon, y = lat, label = team),  \n                   min.segment.length = 0, seed = 42, max.overlaps = 30,\n                   size=2.5) +\n  coord_sf(xlim = c(-6, 2), ylim = c(50, 56)) +\n  labs(title=\"Location of English football clubs Stadiums\",\n       fill=\"Region\",\n       caption=\"Labels only of clubs competing in Premier League during season 2024/2025\")+\n  theme_minimal()\nTo Do: Add number of teams per region. (?)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Enlglish football through the years</span>"
    ]
  },
  {
    "objectID": "results.html#ridgeline-ideas",
    "href": "results.html#ridgeline-ideas",
    "title": "3  Enlglish football through the years",
    "section": "5.1 Ridgeline ideas",
    "text": "5.1 Ridgeline ideas\n\n\nCode\nlibrary(ggplot2)\nlibrary(ggridges)\nlibrary(dplyr)\n\n# 1. Prepare the data (Calculate Goal Difference)\nplot_data &lt;- Data_England %&gt;%\n  mutate(GoalDiff = FTHG - FTAG,\n         # Reorder League so Premier League is at the top/bottom as preferred\n         League = factor(League, levels = c(\"Premier League\", \"Championship\", \"League One\", \"League Two\")))\n\n# 2. Create the Ridgeplot\nggplot(plot_data, aes(x = GoalDiff, y = League, fill = stat(x))) +\n  geom_density_ridges_gradient(scale = 3, rel_min_height = 0.01) +\n  scale_fill_viridis_c(name = \"Goal Diff\", option = \"C\") +\n  labs(title = \"Home Advantage by League\",\n       subtitle = \"Distribution of Goal Difference (Home Goals - Away Goals)\",\n       x = \"Goal Difference (Positive = Home Win)\",\n       y = \"League\") +\n  theme_minimal() +\n  geom_vline(xintercept = 0, linetype = \"dashed\", color = \"white\") # Center line\n\n\n\n\n\n\n\n\n\nCode\n# 2. Evolution of Aggression\n# Filter: Start from 2000 (when card data became reliable)\naggression_data &lt;- Data_England %&gt;%\n  filter(Season &gt;= 2000) %&gt;%  # Adjust year format if Season is a string (e.g., \"2000/2001\")\n  mutate(TotalYellows = HY + AY) %&gt;%\n  filter(!is.na(TotalYellows))\n\nggplot(aggression_data, aes(x = TotalYellows, y = as.factor(Season), fill = ..x..)) +\n  geom_density_ridges_gradient(scale = 2.5, rel_min_height = 0.01) +\n  scale_fill_gradient(low = \"yellow\", high = \"orange\", name = \"Cards\") +\n  labs(\n    title = \"Evolution of Aggression\",\n    subtitle = \"Distribution of Total Yellow Cards per Game by Season\",\n    x = \"Total Yellow Cards (Home + Away)\",\n    y = \"Season\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"none\") # Hide legend if preferred for cleaner look\n\n\n\n\n\n\n\n\n\nCode\n# Extract hour from Time column\nData_England$Hour &lt;- as.numeric(format(as.POSIXct(Data_England$Time, format = \"%H:%M:%S\"), \"%H\"))\n# 3. Entertainment Value by Kick-off Time\n# Filter: Data only exists reliably after ~2019 for specific times\ntime_data &lt;- Data_England %&gt;%\n  filter(!is.na(Hour), !is.na(FTHG), !is.na(FTAG)) %&gt;%\n  mutate(TotalGoals = FTHG + FTAG,\n         HourLabel = factor(paste0(Hour, \":00\"))) # Create readable labels like \"15:00\"\n\nggplot(time_data, aes(x = TotalGoals, y = reorder(HourLabel, desc(HourLabel)), fill = ..x..)) +\n  geom_density_ridges_gradient(scale = 2, rel_min_height = 0.01, quantile_lines = TRUE, quantiles = 2) +\n  scale_fill_viridis_c(option = \"magma\", name = \"Goals\") +\n  labs(\n    title = \"Entertainment Value by Kick-off Time\",\n    subtitle = \"Are evening games higher scoring than early kick-offs?\",\n    x = \"Total Goals in Match\",\n    y = \"Kick-off Hour\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nCode\n# 4. Shot Volume by League\n# Filter: Start from 2000 (when shot data became reliable)\nshot_data &lt;- Data_England %&gt;%\n  filter(Season &gt;= 2000) %&gt;%\n  mutate(TotalShots = HS + AS,\n         TotalGoals= FTHG+FTAG,\n         GoalsShots=TotalGoals/TotalShots) %&gt;%\n  filter(!is.na(GoalsShots)) %&gt;%\n  # Optional: Reorder leagues so Premier League is at the top\n  mutate(League = factor(League, levels = c(\"Premier League\", \"Championship\", \"League One\", \"League Two\")))\n\nggplot(shot_data, aes(x = TotalGoals, y = Season, fill = stat(x))) +\n  geom_density_ridges_gradient(scale = 1.5, rel_min_height = 0.01) +\n  scale_fill_viridis_c(option = \"D\", name = \"Shots\") +\n  labs(\n    title = \"Shot Volume: Premier League vs Lower Tiers\",\n    subtitle = \"Distribution of Total Shots (Home + Away) per Game\",\n    x = \"Total Shots per Game\",\n    y = \"League\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nA typical league is very competitive, besides fighting for be champion, teams also can try to get into european competitions or avoid relegation.\n\n\nCode\n# Alluvial of the standigns of each league over the last years.\n\n\ntarget_season &lt;- \"2023/2024\"\n\nprem_season &lt;- premier_full_complete |&gt;\n  filter(Season == target_season)\n\nprem_season &lt;- prem_season |&gt;\n  mutate(Date = as.Date(Date))\n\nresults_long &lt;- bind_rows(\n  prem_season |&gt;\n    transmute(\n      Date,\n      Team = HomeTeam,\n      Opp  = AwayTeam,\n      GF   = FTHG,\n      GA   = FTAG\n    ),\n  prem_season |&gt;\n    transmute(\n      Date,\n      Team = AwayTeam,\n      Opp  = HomeTeam,\n      GF   = FTAG,\n      GA   = FTHG\n    )\n) |&gt;\n  arrange(Date, Team) |&gt;\n  mutate(\n    Points = case_when(\n      GF &gt; GA ~ 3L,\n      GF == GA ~ 1L,\n      TRUE    ~ 0L\n    ),\n    GD = GF - GA\n  )\n\nresults_cum &lt;- results_long |&gt;\n  group_by(Team) |&gt;\n  arrange(Date, .by_group = TRUE) |&gt;\n  mutate(\n    game_number = row_number(),       \n    cum_pts     = cumsum(Points),\n    cum_gd      = cumsum(GD),\n    cum_gf      = cumsum(GF)\n  ) |&gt;\n  ungroup()\n\n# Ranking after each game week\nstandings_by_round &lt;- results_cum |&gt;\n  group_by(game_number) |&gt;\n  arrange(\n    desc(cum_pts),\n    desc(cum_gd),\n    desc(cum_gf),\n    Team,\n    .by_group = TRUE\n  ) |&gt;\n  mutate(Position = row_number()) |&gt;\n  ungroup()\n\nmax_round &lt;- max(standings_by_round$game_number, na.rm = TRUE)\ncuts &lt;- sort(unique(c(1, seq(5, max_round, by = 5), max_round)))\n\nalluvial_df &lt;- standings_by_round |&gt;\n  filter(game_number %in% cuts) |&gt;\n  mutate(\n    Matchday  = factor(game_number, levels = cuts),\n    PosFactor = factor(Position, levels = 1:20)\n  )\n\nggplot(\n  alluvial_df,\n  aes(x = Matchday,\n      stratum  = PosFactor,\n      alluvium = Team,\n      y        = 1,\n      fill     = Team)\n) +\n  geom_flow(\n    stat          = \"alluvium\",\n    lode.guidance = \"frontback\",\n    alpha         = 0.65\n  ) +\n  geom_stratum(width = 0.25, color = \"grey30\") +\n  stat_stratum(\n    geom  = \"text\",\n    aes(label = after_stat(stratum)),\n    size  = 3,\n    color = \"black\"\n  ) +\n  guides(fill = \"none\") +  \n\n  # Names of the teams after the last round\n  geom_text(\n    stat = \"alluvium\",\n    data = dplyr::filter(\n      alluvial_df,\n      Matchday == levels(Matchday)[length(levels(Matchday))]\n    ),\n    aes(label = Team),\n    size      = 3,\n    color     = \"black\",\n    hjust     = -0.05,\n    position  = position_nudge(x = 0.2)\n  ) +\n  scale_x_discrete(expand = expansion(mult = c(0.02, 0.20))) +\n  labs(\n    title    = \"Team Positions Over the Season (Alluvial)\",\n    subtitle = paste(\n      \"Premier League\", target_season,\n      \"— positions shown every 5 matchdays\"\n    ),\n    x        = \"Matchday\",\n    y        = \"Number of teams\",\n    caption  = \"Source: football-data.co.uk | EDAV Final Project\"\n  ) +\n  theme_minimal(base_size = 13) +\n  theme(\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor   = element_blank()\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\n# Teams in the last season, where were they in the last seasons?\n\n\n## Definition of standings_final\nseason_sizes &lt;- premier_full |&gt;\n  count(Season, name = \"n_matches\")\n\ncomplete_seasons &lt;- season_sizes |&gt;\n  filter(n_matches == 380) |&gt;\n  pull(Season)\n\npremier_complete &lt;- premier_full |&gt;\n  filter(Season %in% complete_seasons)\n\nseasons_sel &lt;- c(\"2000/2001\", \"2005/2006\", \"2010/2011\",\n                 \"2015/2016\", \"2020/2021\", \"2023/2024\")\n\npremier_sel &lt;- premier_complete |&gt;\n  filter(Season %in% seasons_sel)\n\nresults_long &lt;- bind_rows(\n  premier_sel |&gt;\n    transmute(Season,\n              Team = HomeTeam,\n              GF = FTHG,\n              GA = FTAG),\n  premier_sel |&gt;\n    transmute(Season,\n              Team = AwayTeam,\n              GF = FTAG,\n              GA = FTHG)\n) |&gt;\n  mutate(\n    Points = case_when(\n      GF &gt; GA ~ 3L,\n      GF == GA ~ 1L,\n      TRUE    ~ 0L\n    ),\n    GD = GF - GA\n  )\n\nstandings_final &lt;- results_long |&gt;\n  group_by(Season, Team) |&gt;\n  summarise(\n    points = sum(Points, na.rm = TRUE),\n    gd     = sum(GD,     na.rm = TRUE),\n    gf     = sum(GF,     na.rm = TRUE),\n    .groups = \"drop\"\n  ) |&gt;\n  group_by(Season) |&gt;\n  arrange(Season,\n          desc(points), desc(gd), desc(gf), Team,\n          .by_group = TRUE) |&gt;\n  mutate(Position = row_number()) |&gt;\n  ungroup()\n\nteams_first_season &lt;- standings_final |&gt;\n  filter(Season == \"2000/2001\") |&gt;\n  pull(Team)\n\nstandings_first &lt;- standings_final |&gt;\n  filter(Team %in% teams_first_season) |&gt;\n  mutate(\n    Season = factor(Season, levels = seasons_sel),\n    PosFactor = factor(Position, levels = 20:1)\n  )\n\nggplot(\n  standings_first,\n  aes(x = Season,\n      stratum  = PosFactor,\n      alluvium = Team,\n      y        = 1,\n      fill     = Team)\n) +\n  geom_flow(stat = \"alluvium\",\n            lode.guidance = \"frontback\",\n            alpha = 0.65) +\n  geom_stratum(width = 0.25, color = \"grey30\") +\n  stat_stratum(geom = \"text\",\n               aes(label = after_stat(stratum)),\n               size = 3, color = \"black\") +\n  guides(fill = \"none\") +\n  geom_text(\n    stat = \"alluvium\",\n    data = standings_first |&gt;\n      filter(Season == seasons_sel[1]),\n    aes(label = Team),\n    size = 3, color = \"black\", hjust = 1.05,\n    position = position_nudge(x = -0.2)\n  ) +\n  scale_x_discrete(expand = expansion(mult = c(0.20, 0.02))) +\n  scale_y_reverse(breaks = NULL) +\n  labs(\n    title    = \"Evolution of 2000/2001 Teams\",\n    subtitle = \"Premier League — Where did the early 2000s teams end up?\",\n    x        = \"Season\",\n    y        = NULL,\n    caption  = \"Source: football-data.co.uk | EDAV Final Project\"\n  ) +\n  theme_minimal(base_size = 13) +\n  theme(\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor   = element_blank(),\n    axis.text.y = element_blank()\n  )\n\n\n\n\n\n\n\n\n\nis this graph repeated?\n\n\nCode\n# Teams in the season 2000/2001: where are they in the current season?\n# Equipos que aparecen en 2000/2001\n\n\nteams_first_season &lt;- standings_final |&gt;\n  filter(Season == \"2000/2001\") |&gt;\n  pull(Team)\n\nstandings_first &lt;- standings_final |&gt;\n  filter(Team %in% teams_first_season) |&gt;\n  mutate(\n    Season = factor(Season, levels = seasons_sel),\n    PosFactor = factor(Position, levels = 20:1)\n  )\n\n# Gráfica\nggplot(\n  standings_first,\n  aes(x = Season,\n      stratum  = PosFactor,\n      alluvium = Team,\n      y        = 1,\n      fill     = Team)\n) +\n  geom_flow(stat = \"alluvium\",\n            lode.guidance = \"frontback\",\n            alpha = 0.65) +\n  geom_stratum(width = 0.25, color = \"grey30\") +\n  stat_stratum(geom = \"text\",\n               aes(label = after_stat(stratum)),\n               size = 3, color = \"black\") +\n  guides(fill = \"none\") +\n  # Etiquetas en la PRIMERA temporada (lado izquierdo)\n  geom_text(\n    stat = \"alluvium\",\n    data = standings_first |&gt;\n      filter(Season == seasons_sel[1]),  # Primera temporada\n    aes(label = Team),\n    size = 3, color = \"black\", hjust = 1.05,  # hjust &gt; 1 para ponerlo a la izquierda\n    position = position_nudge(x = -0.2)  # Nudge negativo para mover a la izquierda\n  ) +\n  scale_x_discrete(expand = expansion(mult = c(0.20, 0.02))) +  # Más espacio a la izquierda\n  scale_y_reverse(breaks = NULL) +\n  labs(\n    title    = \"Evolution of 2000/2001 Teams\",\n    subtitle = \"Premier League — Where did the early 2000s teams end up?\",\n    x        = \"Season\",\n    y        = NULL,\n    caption  = \"Source: football-data.co.uk | EDAV Final Project\"\n  ) +\n  theme_minimal(base_size = 13) +\n  theme(\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor   = element_blank(),\n    axis.text.y = element_blank()\n  )",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Enlglish football through the years</span>"
    ]
  },
  {
    "objectID": "conclusion.html",
    "href": "conclusion.html",
    "title": "4  Conclusion",
    "section": "",
    "text": "To do. Explain something like the results of our questions and stuff that was interesting.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Conclusion</span>"
    ]
  }
]