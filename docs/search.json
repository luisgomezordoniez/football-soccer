[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "The Beautiful Game",
    "section": "",
    "text": "1 Introduction\nWe are interested in analyzing football soccer match results and statistics from several major leagues around the world. Soccer is one of the most popular sports globally, and its relevance is growing as the next World Cup approaches. We aim to explore how common match statistics such as goals, shots on target, and fouls, affect not only the outcome of individual games but also overall team performance throughout a season. We also plan to study how team rankings evolve over time, whether different strategic patterns can be identified, and how accurate betting odds are in predicting results. Through this project, we hope to discover additional insights about the game and share interesting findings.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "2  Data",
    "section": "",
    "text": "2.1 Description\nWe gather our data from the website “https://www.football-data.co.uk/”, the website have data from matches across the main leagues in Europe and America. We will focus our analysys in the leagues of England, since we have data for the top 4 tiers.\nTo do: Explain the dataset, maybe talk about the variables (?)\nKey to results data:\nDiv = League Division Date = Match Date (dd/mm/yy) Time = Time of match kick off HomeTeam = Home Team AwayTeam = Away Team FTHG and HG = Full Time Home Team Goals FTAG and AG = Full Time Away Team Goals FTR and Res = Full Time Result (H=Home Win, D=Draw, A=Away Win) HTHG = Half Time Home Team Goals HTAG = Half Time Away Team Goals HTR = Half Time Result (H=Home Win, D=Draw, A=Away Win)\nMatch Statistics (where available) Attendance = Crowd Attendance Referee = Match Referee HS = Home Team Shots AS = Away Team Shots HST = Home Team Shots on Target AST = Away Team Shots on Target HHW = Home Team Hit Woodwork AHW = Away Team Hit Woodwork HC = Home Team Corners AC = Away Team Corners HF = Home Team Fouls Committed AF = Away Team Fouls Committed HFKC = Home Team Free Kicks Conceded AFKC = Away Team Free Kicks Conceded HO = Home Team Offsides AO = Away Team Offsides HY = Home Team Yellow Cards AY = Away Team Yellow Cards HR = Home Team Red Cards AR = Away Team Red Cards\nCode\nlibrary(dplyr)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\nCode\nlibrary(tidyr)\nlibrary(readr)\nlibrary(dplyr)\nlibrary(forcats)\nlibrary(ggplot2)\n\nData_England &lt;- read_csv(\"https://github.com/luisgomezordoniez/football-soccer/raw/refs/heads/main/Data_England.csv\")\n\n\nRows: 64872 Columns: 28\n\n\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (11): Div, Date, HomeTeam, AwayTeam, FTR, HTR, Referee, Country, Season...\ndbl  (16): FTHG, FTAG, HTHG, HTAG, HS, AS, HST, AST, HF, AF, HC, AC, HY, AY,...\ntime  (1): Time\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nCode\n#summary(Data_England)\n\nData_England$League &lt;- factor(Data_England$League, levels =c(\"Premier League\", \"Championship\",\"League One\", \"League Two\"), ordered = TRUE)",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.2 Missing value analysis",
    "text": "2.2 Missing value analysis\n\n\nCode\nmissing_summary &lt;- Data_England %&gt;%\n  group_by(League, Season) %&gt;%\n  summarise(across(everything(), ~100* mean(is.na(.))), .groups = \"drop\") %&gt;%  # proportion missing\n  pivot_longer(\n    cols = -c(League, Season),\n    names_to = \"variable\",\n    values_to = \"prop_missing\"\n  ) %&gt;%\n  group_by(variable) %&gt;%\n  mutate(total_missing = mean(prop_missing, na.rm = TRUE)) %&gt;%\n  ungroup() %&gt;%\n  mutate(variable = fct_reorder(variable, total_missing, .desc = TRUE))\n\nmissing_summary=missing_summary |&gt;\n  mutate(Season=substr(Season, 6,10))\n\nggplot(missing_summary, aes(x = variable, y = Season, fill = prop_missing)) +\n  geom_tile(color = \"white\") +\n  facet_wrap(~ League, scales = \"free_y\") +\n  scale_fill_continuous(palette = c(\"white\",\"#FEE0D2\", \"#FC9272\"))+\n  labs(\n    title = \"Proportion of Missing Values Across Seasons and Columns by League\",\n    x = \"Variable\",\n    y = \"Season\",\n    fill=\"Missing (%)\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(\n    axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.5),\n    panel.spacing = unit(1, \"lines\")\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\nlibrary(ggplot2)\nlibrary(patchwork)\n\n# Boxplots for FTHG and FTAG\np1 &lt;- ggplot(Data_England, aes(y = FTHG)) +\n  geom_boxplot(fill = \"lightblue\", alpha = 0.7, outlier.color = \"red\", outlier.size = 2) +\n  labs(title = \"Home Goals (FTHG) - Boxplot\", y = \"Goals\") +\n  theme_minimal()\n\np2 &lt;- ggplot(Data_England, aes(y = FTAG)) +\n  geom_boxplot(fill = \"lightgreen\", alpha = 0.7, outlier.color = \"red\", outlier.size = 2) +\n  labs(title = \"Away Goals (FTAG) - Boxplot\", y = \"Goals\") +\n  theme_minimal()\n\np1 + p2\n\n\n\n\n\n\n\n\n\nTo Do: Explain a bit what we see, maybe we can add another step of explaining our raw data.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "3  Enlglish football through the years",
    "section": "",
    "text": "3.1 Location of Teams\nWe want to see how soccer has changed through the years in terms of attack and defense. Our hypothesis is that the english football has become more competitive. For proving this hypothesis we will analyze the differences among the teams that conform the Premier League, the dominance and the results of the matches.\nFirst of all, we know that goals can be a strong indicator to understand this, so we plan to base our first analysis on the average number of goals scored by teams.\naasas\nWhile the average number of goals by home teams has remained relatively stable since 1993, away teams show a clear upward trend in goals, reflecting more offensive strategies, especially since 2015. This suggests a reduction in the traditional home-field advantage.\ni. Away goals\nBetween 1993 and 2010, away teams scored about 1.10-1.15 goals per match, but since 2011 this number has increased to around 1.20-1.25. Starting in 2018, we can observe a sustained raise in away goals, reaching historic highs in 2023 and 2024, when they exceeded 1.45 goals per match.\nii. Home goals\nHome teams have consistently scored between 1.45 and 1.65 goals per match throughout the entire period, with small drops in 2008 and 2015. Recently, in 2023, there was an increase, but not one strong enough to confirm an upward trend.\nConclusion\nHome-field advantage has decreased significantly over the years. The recent offensive surge in the Premier League comes mainly from away teams.\nOver the past three decades, Premier League results show a decrease in draws, an increase in away-team victories, and relatively stable home-team victories. This suggests that the league has become more competitive and that the traditional home-field advantage has gradually diminished.\nWe have 116 teams across all the tiers, we can see that London and\nCode\n{\n  stadiums &lt;- data.frame(\n  team = c(\n    \"Arsenal\",\"Aston Villa\",\"Bournemouth\",\"Brentford\",\"Brighton\",\"Burnley\",\n    \"Chelsea\",\"Crystal Palace\",\"Everton\",\"Fulham\",\"Leeds\",\"Leicester\",\n    \"Liverpool\",\"Luton\",\"Man City\",\"Man United\",\"Newcastle\",\"Nott'm Forest\",\n    \"Sheffield United\",\"Southampton\",\"Sunderland\",\"Tottenham\",\"West Ham\",\n    \"Wolves\",\"Cardiff\",\"Swansea\",\"Stoke\",\"Norwich\",\"West Brom\",\"Huddersfield\",\n    \"QPR\",\"Reading\",\"Wigan\",\"Blackburn\",\"Bolton\",\"Birmingham\",\"Portsmouth\",\n    \"Blackpool\",\"Derby\",\"Grimsby\",\"Stockport\",\"Tranmere\",\"Port Vale\",\"Bury\",\n    \"Rushden & D\",\"Hartlepool\",\"Dag and Red\",\"Hereford\",\"Torquay\",\"Boston\",\n    \"Kidderminster\",\"Scarborough\",\"Ipswich\",\"Middlesbrough\",\"Watford\",\"Hull\",\n    \"Coventry\",\"Charlton\",\"Sheffield Weds\",\"Wimbledon\",\"Barnsley\",\"Oldham\",\n    \"Swindon\",\"Oxford\",\"Wrexham\",\"Bristol City\",\"Millwall\",\"Preston\",\n    \"Plymouth\",\"Rotherham\",\"Peterboro\",\"Wycombe\",\"Burton\",\"Milton Keynes Dons\",\n    \"Doncaster\",\"Bristol Rvs\",\"Shrewsbury\",\"Cambridge\",\"Carlisle\",\"Cheltenham\",\n    \"Fleetwood Town\",\"Accrington\",\"Morecambe\",\"Forest Green\",\"Chesterfield\",\n    \"Leyton Orient\",\"Newport County\",\"Barrow\",\"Sutton\",\"Yeovil\",\"Scunthorpe\",\n    \"Colchester\",\"Southend\",\"Gillingham\",\"Walsall\",\"Notts County\",\"Lincoln\",\n    \"Exeter\",\"Northampton\",\"Macclesfield\",\"York\",\"Barnet\",\"Salford\",\n    \"Harrogate\",\"Darlington\",\"Halifax\"\n  ),\n  stadium = c(\n    \"Emirates Stadium\",\"Villa Park\",\"Vitality Stadium\",\"Gtech Community Stadium\",\n    \"Falmer Stadium (AMEX)\",\"Turf Moor\",\"Stamford Bridge\",\"Selhurst Park\",\n    \"Goodison Park\",\"Craven Cottage\",\"Elland Road\",\n    \"King Power Stadium\",\"Anfield\",\"Kenilworth Road\",\"Etihad Stadium\",\n    \"Old Trafford\",\"St James' Park\",\"The City Ground\",\"Bramall Lane\",\n    \"St Mary's Stadium\",\"Stadium of Light\",\"Tottenham Hotspur Stadium\",\n    \"London Stadium\",\"Molineux Stadium\",\"Cardiff City Stadium\",\n    \"Swansea.com Stadium\",\"Bet365 Stadium\",\"Carrow Road\",\"The Hawthorns\",\n    \"John Smith's Stadium\",\"Loftus Road\",\"Select Car Leasing Stadium\",\n    \"DW Stadium\",\"Ewood Park\",\"Toughsheet Community Stadium\",\"St Andrew's\",\n    \"Fratton Park\",\"Bloomfield Road\",\"Pride Park Stadium\",\"Blundell Park\",\n    \"Edgeley Park\",\"Prenton Park\",\"Vale Park\",\"Gigg Lane\",\n    \"Hayden Road\",\"Victoria Park\",\"Victoria Road\",\"Edgar Street\",\n    \"Plainmoor\",\"York Street\",\"Aggborough\",\"McCain Stadium\",\n    \"Portman Road\",\"Riverside Stadium\",\"Vicarage Road\",\"MKM Stadium\",\n    \"Coventry Building Society Arena\",\"The Valley\",\"Hillsborough\",\n    \"Plough Lane\",\"Oakwell\",\"Boundary Park\",\"County Ground\",\n    \"Kassam Stadium\",\"Racecourse Ground\",\"Ashton Gate\",\"The Den\",\"Deepdale\",\n    \"Home Park\",\"New York Stadium\",\"London Road Stadium\",\n    \"Adams Park\",\"Pirelli Stadium\",\"Stadium MK\",\"Keepmoat Stadium\",\n    \"Memorial Stadium\",\"Montgomery Waters Meadow\",\"Abbey Stadium\",\n    \"Brunton Park\",\"Whaddon Road\",\"Highbury Stadium\",\"Crown Ground\",\n    \"Mazuma Mobile Stadium\",\"The New Lawn\",\"Technique Stadium\",\"Brisbane Road\",\n    \"Rodney Parade\",\"Holker Street\",\"Gander Green Lane\",\"Huish Park\",\n    \"Glanford Park\",\"JobServe Community Stadium\",\"Roots Hall\",\n    \"Priestfield Stadium\",\"Bescot Stadium\",\"Meadow Lane\",\"Sincil Bank\",\n    \"St James Park\",\"Sixfields Stadium\",\"Moss Rose\",\"Bootham Crescent\",\n    \"The Hive Stadium\",\"Peninsula Stadium\",\"Wetherby Road\",\"Blackwell Meadows\",\n    \"The Shay\"\n  ),\n  lat = c(\n    51.5548,52.5091,50.7352,51.4909,50.8617,53.7891,\n    51.4817,51.3983,53.4387,51.4749,53.7788,52.6201,\n    53.4308,51.8841,53.4830,53.4631,54.9756,52.9392,\n    53.3703,50.9080,54.9144,51.6033,51.5387,52.5901,\n    51.4705,51.6429,52.9881,52.6226,52.5090,53.6499,\n    51.5093,51.4223,53.5463,53.7287,53.5807,52.4759,\n    50.7930,53.8055,52.9225,53.5683,53.4087,53.3779,\n    53.0335,53.5939,52.3338,54.6853,51.5593,52.0649,\n    50.4746,52.9691,52.3800,54.2770,52.0553,54.5828,\n    51.6501,53.7469,52.4497,51.4862,53.4283,51.4287,\n    53.5522,53.5517,51.5647,51.7166,53.0519,51.4402,\n    51.4851,53.7719,50.3804,53.4289,52.5646,51.6210,\n    52.8124,52.0084,53.5186,51.4854,52.6938,52.2039,\n    54.8931,51.9056,53.9248,53.7431,54.0723,51.6427,\n    53.2423,51.5583,51.5873,54.1202,51.3653,50.9328,\n    53.5850,51.9213,51.5458,51.3857,52.5694,52.9467,\n    53.2185,50.7291,52.2359,53.2505,53.9712,51.6190,\n    53.5042,54.0084,54.5194,53.7171\n  ),\n  lon = c(\n    -0.1064, -1.8848, -1.8383, -0.2877, -0.0837, -2.2302,\n    -0.1910, -0.0854, -2.9663, -0.2215, -1.5707, -1.1499,\n    -2.9609, -0.4465, -2.2003, -2.2913, -1.6215, -1.1309,\n    -1.4704, -1.3995, -1.3884, -0.0660, -0.1650, -2.1308,\n    -3.2031, -3.9345, -2.1764, 1.3080, -1.9546, -1.7681,\n    -0.2312, -0.9715, -2.6534, -2.4883, -2.4654, -1.8767,\n    -1.0560, -3.0475, -1.4475, -0.0381, -2.1643, -3.0768,\n    -2.1793, -2.3023, -0.6128, -1.2185, 0.1559, -2.7161,\n    -3.5432, -0.0345, -2.2384, -0.4120, 1.1565, -1.2185,\n    -0.4016, -0.3958, -1.4984, 0.0366, -1.5005, -0.1983,\n    -1.4674, -2.1386, -1.7766, -1.2223, -3.0039, -2.6416,\n    -0.0505, -2.6896, -4.1755, -1.3533, -0.2319, -0.8122,\n    -1.6251, -0.7554, -1.0851, -2.5855, -2.7483, -1.4720,\n    -2.9157, -2.0722, -3.0335, -2.3364, -2.8530, -2.2858,\n    -1.4284, -0.0153, -2.9818, -3.2201, -0.1989, -2.6644,\n    -0.6974, 0.8879, 0.7061, 0.5518, -1.9961, -1.1444,\n    -0.5487, -3.5222, -0.9200, -2.1158, -1.0543, -0.2796,\n    -2.2906, -1.5173, -1.5593, -1.8624\n  )\n)\n}\n\n\nuk_states &lt;- ne_states(country = \"united kingdom\", returnclass = \"sf\")\n\n# Filter for England and Wales and group by regions\nengland_wales_regions &lt;- uk_states %&gt;%\n  filter(geonunit %in% c(\"England\", \"Wales\")) %&gt;%\n  group_by(region) %&gt;%\n  summarise(geometry = st_union(geometry))\n\n\n\n\n# Check the regions\nunique(england_wales_regions$region)\n\n\n [1] \"East\"                       \"East Midlands\"             \n [3] \"East Wales\"                 \"Greater London\"            \n [5] \"North East\"                 \"North West\"                \n [7] \"South East\"                 \"South West\"                \n [9] \"West Midlands\"              \"West Wales and the Valleys\"\n[11] \"Yorkshire and the Humber\"  \n\n\nCode\nengland_wales_regions &lt;- uk_states %&gt;%\n  filter(geonunit %in% c(\"England\", \"Wales\")) %&gt;%\n  group_by(region) %&gt;%\n  summarise(geometry = st_union(geometry))\n\npos &lt;- position_jitter(width = 0.3, seed = 2)\n\npremier_league_teams &lt;- unique(filter(Data_England, Div==\"E0\" & Season==\"2024/2025\")$HomeTeam)\n\nggplot() +\n  geom_sf(data = england_wales_regions,aes(fill=region), \n          color = \"white\", linewidth = 0.3) +\n  geom_point(data = stadiums, aes(x = lon, y = lat), color = \"black\", size = 1.5, alpha = .5) +\n  geom_label_repel(data = stadiums %&gt;% filter(team %in% premier_league_teams),\n                   aes(x = lon, y = lat, label = team),  \n                   min.segment.length = 0, seed = 42, max.overlaps = 30,\n                   size=2.5) +\n  coord_sf(xlim = c(-6, 2), ylim = c(50, 56)) +\n  labs(title=\"Location of English football clubs Stadiums\",\n       fill=\"Region\",\n       caption=\"Labels only of clubs competing in Premier League during season 2024/2025\")+\n  theme_minimal()\nTo Do: Add number of teams per region. (?)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Enlglish football through the years</span>"
    ]
  },
  {
    "objectID": "results.html#team-performance-by-league-over-the-years",
    "href": "results.html#team-performance-by-league-over-the-years",
    "title": "3  Enlglish football through the years",
    "section": "3.2 4. Team performance by league over the years",
    "text": "3.2 4. Team performance by league over the years\n\n\nCode\ncalculate_points &lt;- function(full_time_result, is_home_team) {\n  case_when(\n    full_time_result == \"H\" & is_home_team ~ 3,\n    full_time_result == \"A\" & !is_home_team ~ 3,\n    full_time_result == \"D\" ~ 1,\n    TRUE ~ 0\n  )\n}\n\n\n# 2. CALCULATE LEAGUE STANDINGS\n# Home results\nhome_results &lt;- Data_England %&gt;%\n  select(Season, Div, HomeTeam, FTHG, FTAG, FTR,Tier) %&gt;%\n  rename(Team = HomeTeam, GoalsFor = FTHG, GoalsAgainst = FTAG) %&gt;%\n  mutate(\n    Points = calculate_points(FTR, TRUE),\n    Venue = \"Home\"\n  )\n\n# Away results\naway_results &lt;- Data_England %&gt;%\n  select(Season, Div, AwayTeam, FTHG, FTAG, FTR,Tier) %&gt;%\n  rename(Team = AwayTeam, GoalsFor = FTAG, GoalsAgainst = FTHG) %&gt;%\n  mutate(\n    Points = calculate_points(FTR, FALSE),\n    Venue = \"Away\"\n  )\n\n# Combine and calculate standings\nall_results &lt;- bind_rows(home_results, away_results)\n\nseason_standings &lt;- all_results %&gt;%\n  group_by(Season, Div, Team,Tier) %&gt;%\n  summarise(\n    Played = n(),\n    Wins = sum(Points == 3),\n    Draws = sum(Points == 1),\n    Losses = sum(Points == 0),\n    GoalsFor = sum(GoalsFor),\n    GoalsAgainst = sum(GoalsAgainst),\n    GoalDifference = GoalsFor - GoalsAgainst,\n    Points = sum(Points),\n    .groups = 'drop'\n  ) %&gt;%\n  group_by(Season, Div) %&gt;%\n  mutate(\n    Position = rank(desc(Points), ties.method = \"first\")\n  ) %&gt;%\n  arrange(Season, Div, Position)\n\n\ntitles_data=season_standings |&gt;\n  filter(Div==\"E0\" &Position==1) |&gt;\n  group_by(Team) |&gt;\n  summarise(Titles=n())\n\n# Merge titles data with seasons data\n\n# Create the plot with highlighted Tier 1 teams\n\nmost_recent_season &lt;- max(Data_England$Season, na.rm = TRUE)\ncurrent_tier1_teams &lt;- Data_England %&gt;%\n  filter(Div == \"E0\" & Season == most_recent_season) %&gt;%\n  distinct(HomeTeam) %&gt;%\n  pull(HomeTeam)\n\nData_Teams &lt;- Data_England |&gt;\n  filter(Div == \"E0\") |&gt;\n  group_by(HomeTeam) |&gt;\n  summarize(Seasons = n_distinct(Season)) |&gt;\n  mutate(\n    # Identify if team is currently in Tier 1\n    Current_Tier1 = HomeTeam %in% current_tier1_teams,\n    # Create fill color based on Tier 1 status\n    Team_Type = ifelse(Current_Tier1, \"Current Tier 1\", \"Other Teams\")\n  )\n\n\nData_Teams_Enhanced &lt;- Data_Teams |&gt;\n  left_join(titles_data, by = c(\"HomeTeam\" = \"Team\")) |&gt;\n  mutate(\n    Titles = replace_na(Titles, 0),\n    Current_Tier1 = HomeTeam %in% current_tier1_teams,\n    Team_Type = ifelse(Current_Tier1, \"Premier League\", \"Lower Tiers\")\n  )\n\n\n# Plot with titles in labels\nData_Teams_Enhanced %&gt;%\n  mutate(HomeTeam = fct_reorder(HomeTeam, Seasons)) %&gt;%\n  ggplot(aes(x = HomeTeam, y = Seasons, fill = Team_Type)) +\n  geom_col() +\n  geom_col(aes(x = HomeTeam, y = Titles),fill=\"gold3\")+\n  geom_text(aes(label = ifelse(Titles &gt; 0, \n                               paste0(\"Titles: \", Titles),\"\"\n  )),\n  # y = 0.5,  # Position at the start of the bar\n  hjust = 0, size = 3.5, color = \"black\",fontface = \"bold\") +\n  coord_flip() +\n  labs(\n    title = \"Premier League Seasons and Titles\",\n    x = \"Team\",\n    y = \"Seasons\",\n    fill = \"\",\n    caption=\"\"\n  ) +\n  scale_fill_manual(\n    values = c(\"Premier League\" = \"steelblue\", \"Lower Tiers\" = \"lightsteelblue\")\n  ) +\n  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +\n  theme_minimal(base_size = 13) +\n  theme(legend.position = \"bottom\")\n\n\n\n\n\n\n\n\n\nA typical league is very competitive, besides fighting for be champion, teams also can try to get into european competitions or avoid relegation.\n\n\nCode\n# Alluvial of the standigns of each league over the last years.\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(ggalluvial)\nlibrary(lubridate)\n\ntarget_season &lt;- \"2023/2024\"\n\nprem_season &lt;- premier_full_complete |&gt;\n  filter(Season == target_season)\n\nprem_season &lt;- prem_season |&gt;\n  mutate(Date = as.Date(Date))\n\nresults_long &lt;- bind_rows(\n  prem_season |&gt;\n    transmute(\n      Date,\n      Team = HomeTeam,\n      Opp  = AwayTeam,\n      GF   = FTHG,\n      GA   = FTAG\n    ),\n  prem_season |&gt;\n    transmute(\n      Date,\n      Team = AwayTeam,\n      Opp  = HomeTeam,\n      GF   = FTAG,\n      GA   = FTHG\n    )\n) |&gt;\n  arrange(Date, Team) |&gt;\n  mutate(\n    Points = case_when(\n      GF &gt; GA ~ 3L,\n      GF == GA ~ 1L,\n      TRUE    ~ 0L\n    ),\n    GD = GF - GA\n  )\n\nresults_cum &lt;- results_long |&gt;\n  group_by(Team) |&gt;\n  arrange(Date, .by_group = TRUE) |&gt;\n  mutate(\n    game_number = row_number(),       \n    cum_pts     = cumsum(Points),\n    cum_gd      = cumsum(GD),\n    cum_gf      = cumsum(GF)\n  ) |&gt;\n  ungroup()\n\n# Ranking after each game week\nstandings_by_round &lt;- results_cum |&gt;\n  group_by(game_number) |&gt;\n  arrange(\n    desc(cum_pts),\n    desc(cum_gd),\n    desc(cum_gf),\n    Team,\n    .by_group = TRUE\n  ) |&gt;\n  mutate(Position = row_number()) |&gt;\n  ungroup()\n\nmax_round &lt;- max(standings_by_round$game_number, na.rm = TRUE)\ncuts &lt;- sort(unique(c(1, seq(5, max_round, by = 5), max_round)))\n\nalluvial_df &lt;- standings_by_round |&gt;\n  filter(game_number %in% cuts) |&gt;\n  mutate(\n    Matchday  = factor(game_number, levels = cuts),\n    PosFactor = factor(Position, levels = 1:20)\n  )\n\nggplot(\n  alluvial_df,\n  aes(x = Matchday,\n      stratum  = PosFactor,\n      alluvium = Team,\n      y        = 1,\n      fill     = Team)\n) +\n  geom_flow(\n    stat          = \"alluvium\",\n    lode.guidance = \"frontback\",\n    alpha         = 0.65\n  ) +\n  geom_stratum(width = 0.25, color = \"grey30\") +\n  stat_stratum(\n    geom  = \"text\",\n    aes(label = after_stat(stratum)),\n    size  = 3,\n    color = \"black\"\n  ) +\n  guides(fill = \"none\") +  \n\n  # Names of the teams after the last round\n  geom_text(\n    stat = \"alluvium\",\n    data = dplyr::filter(\n      alluvial_df,\n      Matchday == levels(Matchday)[length(levels(Matchday))]\n    ),\n    aes(label = Team),\n    size      = 3,\n    color     = \"black\",\n    hjust     = -0.05,\n    position  = position_nudge(x = 0.2)\n  ) +\n  scale_x_discrete(expand = expansion(mult = c(0.02, 0.20))) +\n  labs(\n    title    = \"Team Positions Over the Season (Alluvial)\",\n    subtitle = paste(\n      \"Premier League\", target_season,\n      \"— positions shown every 5 matchdays\"\n    ),\n    x        = \"Matchday\",\n    y        = \"Number of teams\",\n    caption  = \"Source: football-data.co.uk | EDAV Final Project\"\n  ) +\n  theme_minimal(base_size = 13) +\n  theme(\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor   = element_blank()\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\n# Teams in the last season, where were they in the last seasons?\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(ggalluvial)\n\n## Definition of standings_final\nseason_sizes &lt;- premier_full |&gt;\n  count(Season, name = \"n_matches\")\n\ncomplete_seasons &lt;- season_sizes |&gt;\n  filter(n_matches == 380) |&gt;\n  pull(Season)\n\npremier_complete &lt;- premier_full |&gt;\n  filter(Season %in% complete_seasons)\n\nseasons_sel &lt;- c(\"2000/2001\", \"2005/2006\", \"2010/2011\",\n                 \"2015/2016\", \"2020/2021\", \"2023/2024\")\n\npremier_sel &lt;- premier_complete |&gt;\n  filter(Season %in% seasons_sel)\n\nresults_long &lt;- bind_rows(\n  premier_sel |&gt;\n    transmute(Season,\n              Team = HomeTeam,\n              GF = FTHG,\n              GA = FTAG),\n  premier_sel |&gt;\n    transmute(Season,\n              Team = AwayTeam,\n              GF = FTAG,\n              GA = FTHG)\n) |&gt;\n  mutate(\n    Points = case_when(\n      GF &gt; GA ~ 3L,\n      GF == GA ~ 1L,\n      TRUE    ~ 0L\n    ),\n    GD = GF - GA\n  )\n\nstandings_final &lt;- results_long |&gt;\n  group_by(Season, Team) |&gt;\n  summarise(\n    points = sum(Points, na.rm = TRUE),\n    gd     = sum(GD,     na.rm = TRUE),\n    gf     = sum(GF,     na.rm = TRUE),\n    .groups = \"drop\"\n  ) |&gt;\n  group_by(Season) |&gt;\n  arrange(Season,\n          desc(points), desc(gd), desc(gf), Team,\n          .by_group = TRUE) |&gt;\n  mutate(Position = row_number()) |&gt;\n  ungroup()\n\nteams_first_season &lt;- standings_final |&gt;\n  filter(Season == \"2000/2001\") |&gt;\n  pull(Team)\n\nstandings_first &lt;- standings_final |&gt;\n  filter(Team %in% teams_first_season) |&gt;\n  mutate(\n    Season = factor(Season, levels = seasons_sel),\n    PosFactor = factor(Position, levels = 20:1)\n  )\n\nggplot(\n  standings_first,\n  aes(x = Season,\n      stratum  = PosFactor,\n      alluvium = Team,\n      y        = 1,\n      fill     = Team)\n) +\n  geom_flow(stat = \"alluvium\",\n            lode.guidance = \"frontback\",\n            alpha = 0.65) +\n  geom_stratum(width = 0.25, color = \"grey30\") +\n  stat_stratum(geom = \"text\",\n               aes(label = after_stat(stratum)),\n               size = 3, color = \"black\") +\n  guides(fill = \"none\") +\n  geom_text(\n    stat = \"alluvium\",\n    data = standings_first |&gt;\n      filter(Season == seasons_sel[1]),\n    aes(label = Team),\n    size = 3, color = \"black\", hjust = 1.05,\n    position = position_nudge(x = -0.2)\n  ) +\n  scale_x_discrete(expand = expansion(mult = c(0.20, 0.02))) +\n  scale_y_reverse(breaks = NULL) +\n  labs(\n    title    = \"Evolution of 2000/2001 Teams\",\n    subtitle = \"Premier League — Where did the early 2000s teams end up?\",\n    x        = \"Season\",\n    y        = NULL,\n    caption  = \"Source: football-data.co.uk | EDAV Final Project\"\n  ) +\n  theme_minimal(base_size = 13) +\n  theme(\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor   = element_blank(),\n    axis.text.y = element_blank()\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\n# Teams in the season 2000/2001: where are they in the current season?\n# Equipos que aparecen en 2000/2001\n\n\nteams_first_season &lt;- standings_final |&gt;\n  filter(Season == \"2000/2001\") |&gt;\n  pull(Team)\n\nstandings_first &lt;- standings_final |&gt;\n  filter(Team %in% teams_first_season) |&gt;\n  mutate(\n    Season = factor(Season, levels = seasons_sel),\n    PosFactor = factor(Position, levels = 20:1)\n  )\n\n# Gráfica\nggplot(\n  standings_first,\n  aes(x = Season,\n      stratum  = PosFactor,\n      alluvium = Team,\n      y        = 1,\n      fill     = Team)\n) +\n  geom_flow(stat = \"alluvium\",\n            lode.guidance = \"frontback\",\n            alpha = 0.65) +\n  geom_stratum(width = 0.25, color = \"grey30\") +\n  stat_stratum(geom = \"text\",\n               aes(label = after_stat(stratum)),\n               size = 3, color = \"black\") +\n  guides(fill = \"none\") +\n  # Etiquetas en la PRIMERA temporada (lado izquierdo)\n  geom_text(\n    stat = \"alluvium\",\n    data = standings_first |&gt;\n      filter(Season == seasons_sel[1]),  # Primera temporada\n    aes(label = Team),\n    size = 3, color = \"black\", hjust = 1.05,  # hjust &gt; 1 para ponerlo a la izquierda\n    position = position_nudge(x = -0.2)  # Nudge negativo para mover a la izquierda\n  ) +\n  scale_x_discrete(expand = expansion(mult = c(0.20, 0.02))) +  # Más espacio a la izquierda\n  scale_y_reverse(breaks = NULL) +\n  labs(\n    title    = \"Evolution of 2000/2001 Teams\",\n    subtitle = \"Premier League — Where did the early 2000s teams end up?\",\n    x        = \"Season\",\n    y        = NULL,\n    caption  = \"Source: football-data.co.uk | EDAV Final Project\"\n  ) +\n  theme_minimal(base_size = 13) +\n  theme(\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor   = element_blank(),\n    axis.text.y = element_blank()\n  )",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Enlglish football through the years</span>"
    ]
  },
  {
    "objectID": "results.html#relation-among-numeric-variables",
    "href": "results.html#relation-among-numeric-variables",
    "title": "3  Enlglish football through the years",
    "section": "3.3 5. Relation among numeric variables",
    "text": "3.3 5. Relation among numeric variables\nWe would like to conduct and analysis to examine the relationships among the different numeric variables in the dataset, for example: the number of goals, (home/away), shots, corners, offsides, total card points (yellow + red), win odds, and draw odds.\n\n\nCode\nlibrary(dplyr)\nlibrary(GGally)\nlibrary(ggplot2)\n\n#premier_full_complete |&gt;\n#  group_by(Season) |&gt;\n#  summarise(\n#    shots_missing = sum(is.na(HS) | is.na(AS)),\n#    shots_on_target_missing = sum(is.na(HST) | is.na(AST))\n#  ) |&gt;\n#  arrange(shots_missing)\n\npremier_full_complete &lt;- premier_full |&gt;\n  group_by(Season) |&gt;\n  filter(n() == 380) |&gt;\n  ungroup()\n\nteam_stats &lt;- bind_rows(\n  # Partidos como LOCAL\n  premier_full_complete |&gt;\n    transmute(\n      Season,\n      Team   = HomeTeam,\n      GF     = FTHG,\n      GA     = FTAG,\n      ShotsFor  = HS,\n      ShotsAg   = AS,\n      SOTFor    = HST,\n      SOTAg     = AST\n    ),\n  # Partidos como VISITANTE\n  premier_full_complete |&gt;\n    transmute(\n      Season,\n      Team   = AwayTeam,\n      GF     = FTAG,\n      GA     = FTHG,\n      ShotsFor  = AS,\n      ShotsAg   = HS,\n      SOTFor    = AST,\n      SOTAg     = HST\n    )\n) |&gt;\n  group_by(Season, Team) |&gt;\n  summarise(\n    matches                  = n(),\n    goals_for                = sum(GF,        na.rm = TRUE),\n    goals_against            = sum(GA,        na.rm = TRUE),\n    shots_for                = sum(ShotsFor,  na.rm = TRUE),\n    shots_against            = sum(ShotsAg,   na.rm = TRUE),\n    shots_on_target_for      = sum(SOTFor,    na.rm = TRUE),\n    shots_on_target_against  = sum(SOTAg,     na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\n# Table with goals and shots for each team by season\nseasons_focus &lt;- c(\"2000/2001\", \"2009/2010\", \"2023/2024\")\n\nteam_stats_focus &lt;- team_stats |&gt;\n  filter(Season %in% seasons_focus) |&gt;\n  mutate(\n    Season = factor(Season, levels = seasons_focus)\n  )\n\n# 2. Parallel coordinates plot\nggparcoord(\n  data        = team_stats_focus,\n  columns     = match(\n    c(\"goals_for\",\n      \"goals_against\",\n      \"shots_on_target_for\",\n      \"shots_on_target_against\"),\n    names(team_stats_focus)\n  ),\n  groupColumn = \"Season\",\n  scale       = \"globalminmax\",  # todos los ejes entre 0 y 1\n  alphaLines  = 0.6,\n  showPoints  = TRUE\n) +\n  labs(\n    title = \"Team Profiles Across Seasons — Premier League\",\n    subtitle = \"Parallel coordinates for seasons 2000/2001, 2009/2010 and 2023/2024\",\n    x = \"Metric\",\n    y = \"Scaled value\"\n  ) +\n  theme_minimal(base_size = 11) +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    legend.position = \"bottom\"\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\nlibrary(dplyr)\nlibrary(scales)   # para rescale()\n\n\n\nAttaching package: 'scales'\n\n\nThe following object is masked from 'package:readr':\n\n    col_factor\n\n\nCode\nlibrary(GGally)\nlibrary(ggplot2)\n\n# 1. Temporadas que queremos comparar\nseasons_focus &lt;- c(\"2000/2001\", \"2009/2010\", \"2023/2024\")\n\nteam_stats_focus &lt;- team_stats |&gt;\n  filter(Season %in% seasons_focus) |&gt;\n  mutate(\n    Season = factor(Season, levels = seasons_focus)\n  )\n\n# 2. Reescalar métricas a [0,1] (min–max global)\nteam_stats_scaled &lt;- team_stats_focus |&gt;\n  mutate(\n    goals_for_s               = rescale(goals_for),\n    goals_against_s           = rescale(goals_against),\n    shots_on_target_for_s     = rescale(shots_on_target_for),\n    shots_on_target_against_s = rescale(shots_on_target_against)\n  )\n\n# 3. Parallel coordinates con métricas escaladas\nGGally::ggparcoord(\n  data        = team_stats_scaled,\n  columns     = match(\n    c(\"goals_for_s\",\n      \"goals_against_s\",\n      \"shots_on_target_for_s\",\n      \"shots_on_target_against_s\"),\n    names(team_stats_scaled)\n  ),\n  groupColumn = \"Season\",\n  scale       = \"globalminmax\",   # ya están en [0,1], esto no cambia nada\n  alphaLines  = 0.6,\n  showPoints  = TRUE\n) +\n  labs(\n    title = \"Team Profiles Across Seasons — Premier League\",\n    subtitle = \"Metrics rescaled to [0,1] for seasons 2000/2001, 2009/2010 and 2023/2024\",\n    x = \"Metric\",\n    y = \"Scaled value\"\n  ) +\n  theme_minimal(base_size = 11) +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    legend.position = \"bottom\"\n  )",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Enlglish football through the years</span>"
    ]
  },
  {
    "objectID": "results.html#relation-among-categorical-variables",
    "href": "results.html#relation-among-categorical-variables",
    "title": "3  Enlglish football through the years",
    "section": "3.4 6. Relation among categorical variables",
    "text": "3.4 6. Relation among categorical variables\nWe want to analyze the existing categorical data and create additional categorical variables to better understand the relationships between team results and certain classifications. We would also like to explore the behavior of different teams, for example, how many home teams that were losing a match ended up winning it, or which leagues are more “home-biased” (meaning that home teams win most of the matches).\n\n\nCode\n# Mosaic plot of different categories.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Enlglish football through the years</span>"
    ]
  },
  {
    "objectID": "results.html#detection-of-clusters",
    "href": "results.html#detection-of-clusters",
    "title": "3  Enlglish football through the years",
    "section": "3.5 7. Detection of clusters",
    "text": "3.5 7. Detection of clusters\nWe know that many of the numerical variables in our dataset are related, so within each league we would like to identify clusters of teams that share similar behavior across seasons. Based on these clusters, we could create indexes and provide explanations for the patterns observed.\n\n\nCode\n# Byplot of numerical variables.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Enlglish football through the years</span>"
    ]
  },
  {
    "objectID": "results.html#other-analysis-and-graphs",
    "href": "results.html#other-analysis-and-graphs",
    "title": "3  Enlglish football through the years",
    "section": "3.6 8. Other analysis and graphs",
    "text": "3.6 8. Other analysis and graphs\nWe would like to explore different ways of analyzing referees behavior during matches to determine whether referees are biased toward home teams. We also want to examine if there is any relationship between league results and World Cup outcomes. In addition, we plan to calculate the differences between the probabilities provided by betting houses and the actual outcomes, as well as conduct other complementary analyses.\n\n\nCode\n# Different plots.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Enlglish football through the years</span>"
    ]
  },
  {
    "objectID": "conclusion.html",
    "href": "conclusion.html",
    "title": "4  Conclusion",
    "section": "",
    "text": "To do. Explain something like the results of our questions and stuff that was interesting.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Conclusion</span>"
    ]
  }
]